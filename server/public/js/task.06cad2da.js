(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["task"],{"1d21":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task"},[s("div",{staticClass:"task__header"},[s("Project"),s("User"),t._m(0)],1),s("TaskInput"),s("div",{staticClass:"task__timer"}),t._m(1)],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task__header__option"},[s("p",[t._v("option")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task__items"},[s("div",{staticClass:"task__items__item"},[s("p",{staticClass:"task__items__task-text"},[t._v(" task info here ")]),s("p",{staticClass:"task__items__task-isDone"},[t._v(" isDone? ")])])])}],i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user"},[s("div",{on:{click:function(e){t.display=!t.display}}},[s("p",[t._v(" User: "+t._s(t.currentUserName)+" ")])]),t.display?s("UserDetails"):t._e()],1)},a=[],u=(s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user__details"},[t.currentUser.id>=0?s("div",[s("button",{on:{click:function(e){t.displayUser=!t.displayUser}}},[t._v(" Show ")]),t.displayUser?s("div",t._l(t.currentUser,(function(e,r){return s("p",{key:r},[t._v(" "+t._s(r+": "+e)+" ")])})),0):t._e(),s("button",[t._v("Logout")])]):s("div",[s("button",[t._v("Login")])])])}),c=[],o={name:"UserDetails",data:function(){return{displayUser:!1}},computed:{currentUser:function(){return this.$store.getters["user/user"]}}},l=o,p=s("2877"),_=Object(p["a"])(l,u,c,!1,null,null,null),d=_.exports,m="ANON",v={name:"User",components:{UserDetails:d},data:function(){return{display:!1,showUser:!1}},computed:{currentUserName:function(){return this.currentUser.id<0?m:this.currentUser.name},currentUser:function(){return this.$store.getters["user/user"]}}},f=v,h=Object(p["a"])(f,i,a,!1,null,null,null),j=h.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project"},[s("div",{on:{click:function(e){t.displayProjects=!t.displayProjects}}},[s("p",[t._v(" "+t._s(t.currentProject.name)+" ")])]),t.displayProjects?s("ProjectInput"):t._e(),t.displayProjects?s("ProjectSelect"):t._e()],1)},C=[],E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project__input",class:t.status},[s("button",{on:{click:function(e){t.display=!t.display}}},[t._v(" "+t._s(t.buttonText)+" ")]),t.display?s("form",{on:{submit:function(e){return e.preventDefault(),t.createProject(e)}}},[s("div",{staticClass:"project__input__form"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.project.value,expression:"project.value"}],staticClass:"project__input__form text",attrs:{type:"text",required:""},domProps:{value:t.project.value},on:{submit:function(e){return e.preventDefault(),t.createProject(e)},input:function(e){e.target.composing||t.$set(t.project,"value",e.target.value)}}}),s("div",{staticClass:"project__input__form__send"},[s("button",{attrs:{type:"button"},on:{click:t.createProject}},[t._v(" CREATE ")])])])]):t._e()])},y=[],S="",P="WAITING",$="SUCCESS",b="ERROR",T={CLEAR:S,WAITING:P,SUCCESS:$,ERROR:b},R={name:"ProjectInput",data:function(){return{display:!1,status:T.CLEAR,project:{value:""}}},computed:{buttonText:function(){return this.display?"CLOSE":"NEW"},isValid:function(){return this.project.value.length>5},user:function(){var t=this.$store.getters["user/current"];return t&&t.id?t.id:-1}},methods:{resetStatus:function(){clearTimeout(this.statusTimer);var t=this;this.statusTimer=setTimeout((function(){t.status=T.CLEAR}),2e3)},createProject:function(){var t=this;if(this.isValid&&this.status===T.CLEAR){this.status=T.WAITING;var e={user:this.user,value:this.project.value};return this.$store.dispatch("projects/create",e).then((function(e){t.$emit(T.SUCCESS,e),t.status=T.SUCCESS,t.resetStatus()})).catch((function(e){t.$emit(T.ERROR,e),t.$store.commit("toasts/toastAdd",e),t.status=T.ERROR,t.resetStatus()}))}}}},U=R,g=Object(p["a"])(U,E,y,!1,null,null,null),x=g.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project__select"},[s("button",{on:{click:t.toggleDisplayProjects}},[t._v(" "+t._s(t.buttonText)+" ")]),t.display?s("div",[s("ul",t._l(t.projects,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.selectProject(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]):t._e()])},I=[],O={name:"ProjectSelect",data:function(){return{display:!1}},computed:{buttonText:function(){return this.display?"HIDE":"SELECT"},projects:function(){return this.$store.getters["projects/projects"]},currentProject:function(){var t=this.$store.getters["projects/current"];return t&&t.id?t:{name:"Project",id:-1}}},methods:{selectProject:function(t){this.$store.commit("projects/projectCurrent",t)},toggleDisplayProjects:function(){this.display=!this.display}}},D=O,L=Object(p["a"])(D,A,I,!1,null,null,null),N=L.exports,w={name:"Project",components:{ProjectInput:x,ProjectSelect:N},data:function(){return{displayProjects:!1}},computed:{currentProject:function(){return this.$store.getters["projects/current"]}}},W=w,G=Object(p["a"])(W,k,C,!1,null,null,null),V=G.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task__input",class:t.status},[s("form",{on:{submit:function(e){return e.preventDefault(),t.createTask(e)}}},[s("div",{staticClass:"task__input__form"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.value,expression:"task.value"}],staticClass:"task__input__form text",attrs:{type:"text",required:""},domProps:{value:t.task.value},on:{submit:function(e){return e.preventDefault(),t.createTask(e)},input:function(e){e.target.composing||t.$set(t.task,"value",e.target.value)}}}),s("div",{staticClass:"task__input__form__send"},[s("button",{attrs:{type:"button"},on:{click:t.createTask}},[t._v(" send ")])])])])])},H=[],J={name:"TaskInput",data:function(){return{status:T.CLEAR,statusTimer:null,task:{value:""}}},computed:{isValid:function(){return this.task.value.length>5},project:function(){var t=this.$store.getters["projects/current"];return t&&t.id?t.id:-1},user:function(){var t=this.$store.getters["user/current"];return t&&t.id?t.id:-1}},methods:{resetStatus:function(){clearTimeout(this.statusTimer);var t=this;this.statusTimer=setTimeout((function(){t.status=T.CLEAR}),2e3)},createTask:function(){var t=this;if(this.isValid&&this.status===T.CLEAR){this.status=T.WAITING;var e={user:this.user,project:this.project,value:this.task.value};return this.$store.dispatch("tasks/create",e).then((function(e){t.$emit(T.SUCCESS,e),t.status=T.SUCCESS,t.resetStatus()})).catch((function(e){t.$emit(T.ERROR,e),t.$store.commit("toasts/toastAdd",e),t.status=T.ERROR,t.resetStatus()}))}}}},z=J,B=Object(p["a"])(z,q,H,!1,null,null,null),F=B.exports,K={name:"Home",components:{User:j,Project:V,TaskInput:F},data:function(){return{userTest:"token here"}},methods:{}},M=K,Q=Object(p["a"])(M,r,n,!1,null,null,null);e["default"]=Q.exports}}]);
//# sourceMappingURL=task.06cad2da.js.map