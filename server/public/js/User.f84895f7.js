(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["User"],{"0d4c":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("br")},r=[],i=e("5dff"),o=e("b6dd"),n=e("8adc"),u=e("fbc4"),l={name:"VerifyUser",props:{verify:{type:String,default:o["a"].CLEAR}},mounted:function(){return this.verifyUser()},methods:{verifyUser:function(){var t=this;return this.$store.dispatch("user/verify",this.verify).then((function(s){return t.handleSuccess(s)})).catch((function(s){return t.handleError(s)}))},handleSuccess:function(t){var s=this,e={message:t.data.message,isTimed:!0,isError:!1};this.$store.commit("toasts/addToast",e),n["a"].timeDelay((function(){s.$router.push({name:i["a"].HOME})}),u["a"].DELAY)},handleError:function(t){this.$store.commit("toasts/addToast",t)}}},m=l,c=e("2877"),d=Object(c["a"])(m,a,r,!1,null,null,null);s["default"]=d.exports},1511:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("router-link",{staticClass:"user__home text-bold fill-fore",attrs:{to:{name:"home"},title:"Home"}},[e("icBack",{staticClass:"md"})],1),e("div",{staticClass:"user relative"},[e("Card",{staticClass:"user__card max-30"},[e("div",{attrs:{slot:"default"},slot:"default"},[e("StatusBar",{class:t.status}),e("p",{staticClass:"title"},[t._v(" User ")]),e("form",{staticClass:"user__form",on:{submit:function(s){return s.preventDefault(),t.submitUserUpgrade(s)}}},[e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Name")]),t.isEdit?e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],attrs:{required:"",type:"text",minlength:"4"},domProps:{value:t.form.name},on:{input:[function(s){s.target.composing||t.$set(t.form,"name",s.target.value)},t.resetStatus]}}):e("p",{staticClass:"user__form-detail"},[t._v(" "+t._s(t.form.name)+" ")])])]),e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Email")]),t.isEdit?e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{required:"",type:"email"},domProps:{value:t.form.email},on:{input:[function(s){s.target.composing||t.$set(t.form,"email",s.target.value)},t.resetStatus]}}):e("p",{staticClass:"user__form-detail"},[t._v(" "+t._s(t.form.email)+" ")])])]),e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Password")]),t.isEdit?e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{required:"",type:"password",minlength:"7"},domProps:{value:t.form.password},on:{input:[function(s){s.target.composing||t.$set(t.form,"password",s.target.value)},t.resetStatus]}}):e("p",{staticClass:"user__form-detail"},[t._v(" xxxxx ")])])]),e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Role")]),t.user?e("p",{staticClass:"user__form-detail"},[t._v(" "+t._s(t.user.role)+" ")]):t._e()])])]),t.user.meta?e("div",{staticClass:"user__meta"},[e("br"),t.user.meta.created?e("div",{staticClass:"input-control"},[e("label",[e("p",{},[t._v("Created")]),e("p",{},[t._v(" "+t._s(t.renderDateTime(t.user.meta.created))+" ")])])]):t._e(),t.user.meta.updated?e("div",{staticClass:"input-control"},[e("label",[e("p",{},[t._v("Updated")]),e("p",{},[t._v(" "+t._s(t.renderDateTime(t.user.meta.updated))+" ")])])]):t._e(),t.user.meta.login?e("div",{staticClass:"input-control"},[e("label",[e("p",{},[t._v("Login")]),e("p",{},[t._v(" "+t._s(t.renderDateTime(t.user.meta.login))+" ")])])]):t._e()]):t._e(),e("br"),e("div",{staticClass:"input-control"},[e("label",[e("p",{},[t._v("Tasks")]),e("p",{},[t._v(" "+t._s(t.totals.tasksDone)+" / "+t._s(t.totals.tasks)+" ")])])]),e("div",{staticClass:"input-control"},[e("label",[e("p",{},[t._v("Projects")]),e("p",{},[t._v(" "+t._s(t.totals.projectsDone)+" / "+t._s(t.totals.projects)+" ")])])])],1),e("template",{staticClass:"user__form__footer",slot:"footer"},[e("button",{staticClass:"user__form__footer__edit-btn",class:{DISABLED:!t.allowEdit},attrs:{type:"button",tabindex:t.allowEdit?0:-1},on:{click:function(s){return s.preventDefault(),t.toggleEdit(s)}}},[t.isEdit?e("p",[t._v("Cancel")]):e("p",[t._v("Edit")])]),e("button",{staticClass:"user__form__footer__ok-btn",class:{DISABLED:!t.isValid},attrs:{type:"submit",tabindex:t.isValid?0:-1},on:{click:function(s){return s.preventDefault(),t.submitUserUpgrade(s)}}},[e("p",[t._v("OK")])])])],2),e("div",{staticClass:"container max-30"},[t.isAnon?e("p",{staticClass:"word-break"},[t._v(" Your account is a Anonymous and tied only to this device, but it can be upgraded to a User account which can be logged in any time from any device. "),e("router-link",{staticClass:"color-success",attrs:{to:"/user/create"}},[t._v(" Upgrade ")])],1):t._e(),t.isUser?e("p",{staticClass:"word-break"},[t._v(" Account type: User ")]):t._e(),t.isVerified?t._e():e("p",{staticClass:"word-break"},[t._v(" !Account not verified ")]),t.isAdmin?e("p",{staticClass:"word-break"},[t._v(" Your account is a Admin account. ")]):t._e()])],1)],1)},r=[],i=(e("c975"),e("b0c0"),e("5530")),o=e("8adc"),n=e("fbc4"),u=e("6ffa"),l=e("24d4"),m=e("c958"),c=e("28ea"),d=e("ec41"),f=e("2f62"),p={name:"User",components:{Card:m["a"],icBack:l["a"],StatusBar:c["a"]},data:function(){return{isEdit:!1,status:u["a"].CLEAR,form:{name:"",email:"",password:""}}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(f["c"])("user",{user:function(t){return t.user},totals:function(t){return t.totals}})),Object(f["b"])({isAnon:"user/isAnon",isUser:"user/isUser",isAdmin:"user/isAdmin",isLoggedIn:"user/isLoggedIn"})),{},{allowEdit:function(){return this.isUser||this.isAdmin},isVerified:function(){return this.user.meta.verified},isValid:function(){return!!this.isLoggedIn&&(this.status===u["a"].CLEAR&&(this.isValidName||this.isValidEmail||this.isValidPassword))},isValidName:function(){return this.form.name.length>4&&this.form.name!==this.user.name},isValidEmail:function(){return!(this.form.email.indexOf("@")<0)&&(!(this.form.email.indexOf(".")<0)&&(this.form.email.length>4&&this.form.email!==this.user.email))},isValidPassword:function(){return this.form.password.length>7&&this.form.password!==this.user.password}}),mounted:function(){this.resetForm()},methods:{renderDateTime:function(t){return o["a"].renderDateTime(t)},toggleEdit:function(){this.isEdit=!this.isEdit,this.resetForm()},resetForm:function(){this.user&&(this.form.name=this.user.name,this.form.email=this.user.email,this.form.password="")},resetStatus:function(){this.status=u["a"].CLEAR},submitUserUpgrade:function(){var t=this;if(this.status===u["a"].CLEAR&&this.isValid){this.status=u["a"].WAITING;var s={id:this.user.id,name:this.isValidName?this.form.name:void 0,email:this.isValidEmail?this.form.email:void 0,password:this.validPassword?this.form.password:void 0};return this.$store.dispatch("user/update",s).then((function(s){return t.handleSuccess(s)})).catch((function(s){return t.handleError(s,t.submitUserUpgrade)}))}},handleSuccess:function(t){var s=this;t.isTimed=!0,t.isError=!1,this.status=u["a"].SUCCESS,this.$store.commit("toasts/addToast",t),o["a"].timeDelay((function(){s.status=u["a"].CLEAR,s.toggleEdit()}),n["a"].DELAY_SUCCESS)},handleError:function(t,s){var e=Object(d["a"])(t,"response.status");if(e&&401===e&&this.$store.getters["user/isAnon"]&&s)return s();throw this.status=u["a"].ERROR,this.$emit(u["a"].ERROR,t),this.$store.commit("toasts/addToast",t),t}}},h=p,v=e("2877"),_=Object(v["a"])(h,a,r,!1,null,null,null);s["default"]=_.exports},"41cf":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"user relative"},[e("router-link",{staticClass:"user__home",attrs:{to:"/",title:"go to home"}},[e("p",{staticClass:"upper text-bold"},[t._v("Home")])]),e("br"),e("Card",{staticClass:"user__card max-30"},[e("div",{attrs:{slot:"default"},slot:"default"},[e("StatusBar",{class:t.status}),e("p",{staticClass:"title"},[t._v(" Password Reset ")]),t.showEmail?e("form",{staticClass:"user__form",on:{submit:function(s){return s.preventDefault(),t.submitResetStart(s)}}},[e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{required:"",type:"email"},domProps:{value:t.form.email},on:{input:[function(s){s.target.composing||t.$set(t.form,"email",s.target.value)},t.resetStatus]}})])])]):t._e(),t.showPassword?e("form",{staticClass:"user__form",on:{submit:function(s){return s.preventDefault(),t.submitResetComplete(s)}}},[e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{required:"",type:"password",minlength:"7"},domProps:{value:t.form.password},on:{input:[function(s){s.target.composing||t.$set(t.form,"password",s.target.value)},t.resetStatus]}})])])]):t._e()],1),e("template",{staticClass:"user__form__footer",slot:"footer"},[t.showEmail?e("button",{staticClass:"user__form__footer__ok-btn",class:{DISABLED:!t.validEmail},attrs:{tabindex:t.validEmail?0:-1,type:"submit"},on:{click:function(s){return s.preventDefault(),t.submitResetStart(s)}}},[e("p",[t._v("OK")])]):t._e(),t.showPassword?e("button",{staticClass:"user__form__footer__ok-btn",class:{DISABLED:!t.validPassword},attrs:{tabindex:t.validPassword?0:-1,type:"submit"},on:{click:function(s){return s.preventDefault(),t.submitResetComplete(s)}}},[e("p",[t._v("OK")])]):t._e()])],2)],1)},r=[],i=(e("c975"),e("8adc")),o=e("fbc4"),n=e("6ffa"),u=e("28ea"),l=e("c958"),m=e("5dff"),c={name:"UserReset",components:{Card:l["a"],StatusBar:u["a"]},data:function(){return{status:n["a"].CLEAR,form:{email:"",password:""}}},props:{verify:{type:String,default:""}},computed:{showEmail:function(){return!this.verify},showPassword:function(){return this.verify},validPassword:function(){return this.form.password.length>6},validEmail:function(){return!(this.form.email.indexOf("@")<0)&&(!(this.form.email.indexOf(".")<0)&&this.form.email.length>4)},isValid:function(){return this.status===n["a"].CLEAR}},methods:{resetStatus:function(){this.status=n["a"].CLEAR},submitResetStart:function(){var t=this;if(this.validEmail&&this.isValid)return this.status=n["a"].WAITING,this.$store.dispatch("user/resetStart",{email:this.form.email}).then((function(s){return t.handleSuccess(s)})).catch((function(s){return t.handleError(s)}))},submitResetComplete:function(){var t=this;if(this.validPassword&&this.isValid)return this.status=n["a"].WAITING,this.$store.dispatch("user/resetComplete",{verify:this.verify,password:this.form.pasword}).then((function(s){return t.handleSuccess(s)})).catch((function(s){return t.handleError(s)}))},handleSuccess:function(){var t=this;this.status=n["a"].SUCCESS,i["a"].timeDelay((function(){t.status=n["a"].CLEAR,t.$router.push({name:m["a"].HOME})}),o["a"].DELAY_SUCCESS)},handleError:function(t){this.status=n["a"].ERROR,this.$emit(n["a"].ERROR,t),this.$store.commit("toasts/addToast",t)}}},d=c,f=e("2877"),p=Object(f["a"])(d,a,r,!1,null,null,null);s["default"]=p.exports},"43f8":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"user relative"},[e("router-link",{staticClass:"user__home",attrs:{to:"/",title:"go to home"}},[e("p",{staticClass:"upper text-bold"},[t._v("Home")])]),e("br"),e("form",{staticClass:"user__form",on:{submit:function(s){return s.preventDefault(),t.submitLogin(s)}}},[e("Card",{staticClass:"user__card max-30"},[e("div",{attrs:{slot:"default"},slot:"default"},[e("StatusBar",{class:t.status}),e("p",{staticClass:"title"},[t._v(" Login ")]),e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{required:"",type:"email"},domProps:{value:t.form.email},on:{input:[function(s){s.target.composing||t.$set(t.form,"email",s.target.value)},t.resetStatus]}})])]),e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{required:"",type:"password",minlength:"7"},domProps:{value:t.form.password},on:{input:[function(s){s.target.composing||t.$set(t.form,"password",s.target.value)},t.resetStatus]}})])])],1),e("template",{staticClass:"user__form__footer",slot:"footer"},[e("router-link",{staticClass:"text-bold color-fore",attrs:{to:"/user/create"}},[t._v(" Create ")]),e("button",{staticClass:"user__form__footer__ok-btn",class:{DISABLED:!t.isValid},attrs:{tabindex:t.isValid?0:-1,type:"submit"},on:{click:function(s){return s.preventDefault(),t.submitLogin(s)}}},[e("p",[t._v("OK")])])],1)],2)],1),e("div",{staticClass:"container max-30"},[e("router-link",{staticClass:"color-success",class:{DISABLED:!t.showResetLink},attrs:{to:"/user/reset"}},[t._v(" Lost password? ")])],1)],1)},r=[],i=(e("c975"),e("5530")),o=e("8adc"),n=e("fbc4"),u=e("6ffa"),l=e("28ea"),m=e("c958"),c=e("5dff"),d=e("2f62"),f={name:"UserLogin",components:{Card:m["a"],StatusBar:l["a"]},data:function(){return{status:u["a"].CLEAR,form:{email:"",password:""}}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(d["c"])("user",{user:function(t){return t.user}})),Object(d["b"])({isAnon:"user/isAnon"})),{},{isValid:function(){return!(this.form.email.length<4)&&(!(this.form.email.indexOf("@")<0)&&(!(this.form.email.indexOf(".")<0)&&(this.status===u["a"].CLEAR&&this.form.password.length>=7)))},showResetLink:function(){return!this.isAnon}}),methods:{resetStatus:function(){this.status=u["a"].CLEAR},submitLogin:function(){var t=this;if(this.isValid&&this.status===u["a"].CLEAR)return this.status=u["a"].WAITING,this.$store.dispatch("user/login",this.form).then((function(){return t.$store.commit("setReady",!0)})).then((function(s){return t.handleSuccess(s)})).catch((function(s){return t.handleError(s)}))},handleSuccess:function(){var t=this;this.status=u["a"].SUCCESS,o["a"].timeDelay((function(){t.status=u["a"].CLEAR}),n["a"].DELAY_SUCCESS),o["a"].timeDelay((function(){t.$router.push({name:c["a"].PROJECTS})}),n["a"].DELAY_SUCCESS+n["a"].DELAY_SHORT)},handleError:function(t){this.status=u["a"].ERROR,this.$emit(u["a"].ERROR,t),this.$store.commit("toasts/addToast",t)}}},p=f,h=e("2877"),v=Object(h["a"])(p,a,r,!1,null,null,null);s["default"]=v.exports},"924e":function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"user relative"},[e("router-link",{staticClass:"user__home",attrs:{to:"/",title:"go to home"}},[e("p",{staticClass:"upper text-bold"},[t._v("Home")])]),e("br"),e("Card",{staticClass:"user__card max-30"},[e("div",{attrs:{slot:"default"},slot:"default"},[e("StatusBar",{class:t.status}),e("p",{staticClass:"title"},[t._v(" Create ")]),e("form",{staticClass:"user__form",on:{submit:function(s){return s.preventDefault(),t.submitForm(s)}}},[e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Name")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],attrs:{required:"",type:"string",minlength:"4"},domProps:{value:t.form.name},on:{input:[function(s){s.target.composing||t.$set(t.form,"name",s.target.value)},t.resetStatus]}})])]),e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Email")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{required:"",type:"email"},domProps:{value:t.form.email},on:{input:[function(s){s.target.composing||t.$set(t.form,"email",s.target.value)},t.resetStatus]}})])]),e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Password")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{required:"",type:"password",minlength:"7"},domProps:{value:t.form.password},on:{input:[function(s){s.target.composing||t.$set(t.form,"password",s.target.value)},t.resetStatus]}})])])])],1),e("template",{staticClass:"user__form__footer",slot:"footer"},[e("router-link",{staticClass:"text-bold color-fore",attrs:{to:"/user/login"}},[t._v(" Login ")]),e("button",{staticClass:"user__form__footer__ok-btn",class:{DISABLED:!t.isValid},attrs:{tabindex:t.isValid?0:-1,type:"submit"},on:{click:function(s){return s.preventDefault(),t.submitForm(s)}}},[e("p",[t._v("OK")])])],1)],2)],1)},r=[],i=(e("c975"),e("b0c0"),e("5530")),o=e("5dff"),n=e("8adc"),u=e("fbc4"),l=e("6ffa"),m=e("c958"),c=e("28ea"),d=e("2f62"),f={name:"UserCreate",components:{Card:m["a"],StatusBar:c["a"]},data:function(){return{status:l["a"].CLEAR,form:{name:"",email:"",password:""}}},computed:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(d["c"])("user",{userId:function(t){return t.user.id}})),Object(d["b"])({isAnon:"user/isAnon"})),{},{isValid:function(){return!(this.form.name.length<4)&&(!(this.form.email.length<4)&&(!(this.form.email.indexOf("@")<0)&&(!(this.form.email.indexOf(".")<0)&&(this.status===l["a"].CLEAR&&this.form.password.length>=7))))}}),methods:{resetStatus:function(){this.status=l["a"].CLEAR},submitForm:function(){if(this.isValid&&this.status===l["a"].CLEAR)return this.status=l["a"].WAITING,this.isAnon?this.submitUserUpgrade():this.submitUser()},submitUser:function(){var t=this;return this.$store.dispatch("user/create",this.form).then((function(s){return t.handleSuccess(s)})).catch((function(s){return t.handleError(s)}))},submitUserUpgrade:function(){var t=this,s={id:this.userId,name:this.form.name,email:this.form.email,password:this.form.password};return this.$store.dispatch("user/createUpgrade",s).then((function(s){return t.handleSuccess(s)})).catch((function(s){return t.handleError(s)}))},handleSuccess:function(t){var s=this;t.isTimed=!0,t.isError=!1,this.status=l["a"].SUCCESS,this.$store.commit("toasts/addToast",t),n["a"].timeDelay((function(){s.status=l["a"].CLEAR,s.$router.push({name:o["a"].PROJECTS})}),u["a"].DELAY_SUCCESS)},handleError:function(t){this.status=l["a"].ERROR,this.$emit(l["a"].ERROR,t),this.$store.commit("toasts/addToast",t)}}},p=f,h=e("2877"),v=Object(h["a"])(p,a,r,!1,null,null,null);s["default"]=v.exports},c975:function(t,s,e){"use strict";var a=e("23e7"),r=e("4d64").indexOf,i=e("a640"),o=e("ae40"),n=[].indexOf,u=!!n&&1/[1].indexOf(1,-0)<0,l=i("indexOf"),m=o("indexOf",{ACCESSORS:!0,1:0});a({target:"Array",proto:!0,forced:u||!l||!m},{indexOf:function(t){return u?n.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=User.f84895f7.js.map