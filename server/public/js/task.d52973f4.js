(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["task"],{"1d21":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task"},[s("div",{staticClass:"task__header"},[s("Project"),s("User"),t._m(0)],1),s("TaskInput"),s("div",{staticClass:"task__timer"}),s("TaskItems")],1)},n=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task__header__option"},[s("p",[t._v("option")])])}],u=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user"},[s("div",{on:{click:function(e){t.display=!t.display}}},[s("p",[t._v(" User: "+t._s(t.currentUserName)+" ")])]),t.display?s("UserDetails"):t._e()],1)},a=[],i=(s("b0c0"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user__details"},[t.currentUser.id>=0?s("div",[s("button",{on:{click:function(e){t.displayUser=!t.displayUser}}},[t._v(" Show ")]),t.displayUser?s("div",t._l(t.currentUser,(function(e,r){return s("p",{key:r},[t._v(" "+t._s(r+": "+e)+" ")])})),0):t._e(),s("button",[t._v("Logout")])]):s("div",[s("button",[t._v("Login")])])])}),c=[],o={name:"UserDetails",data:function(){return{displayUser:!1}},computed:{currentUser:function(){return this.$store.getters["user/user"]}}},l=o,p=s("2877"),d=Object(p["a"])(l,i,c,!1,null,null,null),_=d.exports,m="ANON",v={name:"User",components:{UserDetails:_},data:function(){return{display:!1,showUser:!1}},computed:{currentUserName:function(){return this.currentUser.id<0?m:this.currentUser.name},currentUser:function(){return this.$store.getters["user/user"]}}},f=v,h=Object(p["a"])(f,u,a,!1,null,null,null),j=h.exports,k=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project"},[s("div",{on:{click:function(e){t.displayProjects=!t.displayProjects}}},[s("p",[t._v(" "+t._s(t.currentProject.name)+" ")])]),t.displayProjects?s("ProjectInput"):t._e(),t.displayProjects?s("ProjectSelect"):t._e()],1)},C=[],E=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project__input",class:t.status},[s("button",{on:{click:function(e){t.display=!t.display}}},[t._v(" "+t._s(t.buttonText)+" ")]),t.display?s("form",{on:{submit:function(e){return e.preventDefault(),t.createProject(e)}}},[s("div",{staticClass:"project__input__form"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.project.value,expression:"project.value"}],staticClass:"project__input__form text",attrs:{type:"text",required:""},domProps:{value:t.project.value},on:{submit:function(e){return e.preventDefault(),t.createProject(e)},input:function(e){e.target.composing||t.$set(t.project,"value",e.target.value)}}}),s("div",{staticClass:"project__input__form__send"},[s("button",{attrs:{type:"button"},on:{click:t.createProject}},[t._v(" CREATE ")])])])]):t._e()])},R=[],$="",y="WAITING",T="SUCCESS",S="ERROR",P={CLEAR:$,WAITING:y,SUCCESS:T,ERROR:S},b={name:"ProjectInput",data:function(){return{display:!1,status:P.CLEAR,project:{value:""}}},computed:{buttonText:function(){return this.display?"CLOSE":"NEW"},isValid:function(){return this.project.value.length>5},user:function(){var t=this.$store.getters["user/current"];return t&&t.id?t.id:-1}},methods:{resetStatus:function(){clearTimeout(this.statusTimer);var t=this;this.statusTimer=setTimeout((function(){t.status=P.CLEAR}),2e3)},createProject:function(){var t=this;if(this.isValid&&this.status===P.CLEAR){this.status=P.WAITING;var e={user:this.user,value:this.project.value};return this.$store.dispatch("projects/create",e).then((function(e){t.$emit(P.SUCCESS,e),t.status=P.SUCCESS,t.resetStatus()})).catch((function(e){t.$emit(P.ERROR,e),t.$store.commit("toasts/toastAdd",e),t.status=P.ERROR,t.resetStatus()}))}}}},U=b,g=Object(p["a"])(U,E,R,!1,null,null,null),I=g.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"project__select"},[s("button",{on:{click:t.toggleDisplayProjects}},[t._v(" "+t._s(t.buttonText)+" ")]),t.display?s("div",[s("ul",t._l(t.projects,(function(e){return s("li",{key:e.id,on:{click:function(s){return t.selectProject(e)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]):t._e()])},x=[],O={name:"ProjectSelect",data:function(){return{display:!1}},computed:{buttonText:function(){return this.display?"HIDE":"SELECT"},projects:function(){return this.$store.getters["projects/projects"]},currentProject:function(){var t=this.$store.getters["projects/current"];return t&&t.id?t:{name:"Project",id:-1}}},methods:{selectProject:function(t){this.$store.commit("projects/projectCurrent",t)},toggleDisplayProjects:function(){this.display=!this.display}}},L=O,N=Object(p["a"])(L,A,x,!1,null,null,null),w=N.exports,D={name:"Project",components:{ProjectInput:I,ProjectSelect:w},data:function(){return{displayProjects:!1}},computed:{currentProject:function(){return this.$store.getters["projects/current"]}}},W=D,G=Object(p["a"])(W,k,C,!1,null,null,null),V=G.exports,q=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task__input",class:t.status},[s("form",{on:{submit:function(e){return e.preventDefault(),t.createTask(e)}}},[s("div",{staticClass:"task__input__form"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.task.value,expression:"task.value"}],staticClass:"task__input__form text",attrs:{type:"text",required:""},domProps:{value:t.task.value},on:{submit:function(e){return e.preventDefault(),t.createTask(e)},input:function(e){e.target.composing||t.$set(t.task,"value",e.target.value)}}}),s("div",{staticClass:"task__input__form__send"},[s("button",{attrs:{type:"button"},on:{click:t.createTask}},[t._v(" send ")])])])])])},H=[],J={name:"TaskInput",data:function(){return{status:P.CLEAR,statusTimer:null,task:{value:""}}},computed:{isValid:function(){return this.task.value.length>5},project:function(){var t=this.$store.getters["projects/current"];return t&&t.id?t.id:-1},user:function(){var t=this.$store.getters["user/current"];return t&&t.id?t.id:-1}},methods:{resetStatus:function(){clearTimeout(this.statusTimer);var t=this;this.statusTimer=setTimeout((function(){t.status=P.CLEAR}),2e3)},createTask:function(){var t=this;if(this.isValid&&this.status===P.CLEAR&&this.status!==P.WAITING){this.status=P.WAITING;var e={user:this.user,project:this.project,value:this.task.value};return this.$store.dispatch("tasks/create",e).then((function(e){t.$emit(P.SUCCESS,e),t.status=P.SUCCESS,t.resetStatus()})).catch((function(e){t.$emit(P.ERROR,e),t.$store.commit("toasts/toastAdd",e),t.status=P.ERROR,t.resetStatus()}))}}}},B=J,z=Object(p["a"])(B,q,H,!1,null,null,null),F=z.exports,K=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"task__items",class:t.status},t._l(t.tasks,(function(e){return s("p",{key:e.id,staticClass:"task__items-text"},[t._v(" "+t._s(e.value)+" ")])})),0)},M=[],Q={name:"TaskItems",data:function(){return{status:P.CLEAR}},computed:{tasks:function(){return this.$store.getters["tasks/tasks"]},project:function(){var t=this.$store.getters["projects/current"];return t&&t.id?t.id:-1},user:function(){var t=this.$store.getters["user/current"];return t&&t.id?t.id:-1}},mounted:function(){var t=this;this.status=P.WAITING;var e=null;return e=this.project>-1?{project:this.project}:{user:this.user},this.$store.dispatch("tasks/getTasksByUserOrProject",e).then((function(){t.status=P.CLEAR})).catch((function(e){t.status=P.ERROR,t.$emit(P.ERROR,e),t.$store.commit("toasts/toastAdd",e)}))}},X=Q,Y=Object(p["a"])(X,K,M,!1,null,null,null),Z=Y.exports,tt={name:"Home",components:{User:j,Project:V,TaskInput:F,TaskItems:Z},data:function(){return{userTest:"token here"}}},et=tt,st=Object(p["a"])(et,r,n,!1,null,null,null);e["default"]=st.exports}}]);
//# sourceMappingURL=task.d52973f4.js.map