(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["User"],{1511:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("router-link",{staticClass:"user__home text-bold fill-fore",attrs:{to:"/",title:"go to home"}},[e("icBack",{staticClass:"md"})],1),e("div",{staticClass:"user relative"},[e("Card",{staticClass:"user__card max-30"},[e("div",{attrs:{slot:"default"},slot:"default"},[e("StatusBar",{class:t.status}),e("div",{staticClass:"text-center "},[e("p",{staticClass:"upper text-bold display-inline-b"},[t._v(" User ")])]),e("form",{staticClass:"user__form",on:{submit:function(s){return s.preventDefault(),t.submitUserUpgrade(s)}}},[e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Name")]),t.isEdit?e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],attrs:{required:"",type:"text",minlength:"4"},domProps:{value:t.form.name},on:{input:[function(s){s.target.composing||t.$set(t.form,"name",s.target.value)},t.resetStatus]}}):e("p",{staticClass:"user__form-detail"},[t._v(" "+t._s(t.form.name)+" ")])])]),e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Email")]),t.isEdit?e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{required:"",type:"email"},domProps:{value:t.form.email},on:{input:[function(s){s.target.composing||t.$set(t.form,"email",s.target.value)},t.resetStatus]}}):e("p",{staticClass:"user__form-detail"},[t._v(" "+t._s(t.form.email)+" ")])])]),e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Password")]),t.isEdit?e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{required:"",type:"password",minlength:"7"},domProps:{value:t.form.password},on:{input:[function(s){s.target.composing||t.$set(t.form,"password",s.target.value)},t.resetStatus]}}):e("p",{staticClass:"user__form-detail"},[t._v(" xxxxx ")])])]),e("div",{staticClass:"input-control"},[e("label",[e("p",[t._v("Role")]),e("p",{staticClass:"user__form-detail"},[t._v(" "+t._s(t.form.role)+" ")])])])])],1),e("template",{staticClass:"user__form__footer",slot:"footer"},[e("button",{staticClass:"user__form__footer__edit-btn",class:{DISABLED:!t.allowEdit},attrs:{type:"button"},on:{click:function(s){return s.preventDefault(),t.toggleEdit(s)}}},[t.isEdit?e("p",[t._v("Cancel")]):e("p",[t._v("Edit")])]),e("button",{staticClass:"user__form__footer__ok-btn",class:{DISABLED:!t.isValid},attrs:{type:"submit",tabindex:t.isValid?0:-1},on:{click:function(s){return s.preventDefault(),t.submitUserUpgrade(s)}}},[e("p",[t._v("OK")])])])],2),e("UserLogout"),e("div",{staticClass:"container max-30"},[t.isAnon?e("p",{staticClass:"word-break"},[t._v(" Your account is a Anonymous and tied only to this device, but it can be upgraded to a User account which can be logged in any time from any device. "),e("router-link",{staticClass:"color-success",attrs:{to:"/user/create"}},[t._v(" Upgrade ")])],1):t._e(),t.isUser?e("p",{staticClass:"word-break"},[t._v(" Your account is a User account. ")]):t._e(),t.isAdmin?e("p",{staticClass:"word-break"},[t._v(" Your account is a Admin account. ")]):t._e()])],1)],1)},r=[],a=(e("c975"),e("b0c0"),e("8adc")),o=e("fbc4"),n=e("6ffa"),l=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("svg",{staticClass:"icon",staticStyle:{"fill-rule":"evenodd","clip-rule":"evenodd","stroke-linejoin":"round","stroke-miterlimit":"2"},attrs:{viewBox:"0 0 200 200",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve","xmlns:serif":"http://www.serif.com/"}},[e("path",{attrs:{d:"M121.355,170.711l0,-141.422l-70.71,70.711l70.71,70.711Z"}})])},u=[],c=e("2877"),d={},m=Object(c["a"])(d,l,u,!1,null,null,null),f=m.exports,h=e("c958"),p=function(){var t=this,s=t.$createElement,e=t._self._c||s;return t.isLoggedIn?e("div",{staticClass:"container max-30"},[e("button",{staticClass:"bg-warning color-fore",on:{click:t.logout}},[t._v(" Logout ")])]):t._e()},v=[],_=e("5dff"),g={name:"UserLogout",computed:{isLoggedIn:function(){return this.$store.getters["user/isLoggedIn"]}},methods:{logout:function(){var t=this;return this.$store.dispatch("user/logout").then((function(s){return t.handleSuccess(s)})).catch((function(s){return t.handleError(s)}))},handleSuccess:function(){var t=this;a["a"].timeDelay((function(){t.$router.push({name:_["a"].HOME})}),o["a"].DELAY_SUCCESS)},handleError:function(t){this.$emit(n["a"].ERROR,t),this.$store.commit("toasts/toastAdd",t)}}},w=g,E=Object(c["a"])(w,p,v,!1,null,null,null),C=E.exports,x=e("28ea"),b={name:"User",components:{Card:h["a"],icBack:f,StatusBar:x["a"],UserLogout:C},data:function(){return{isEdit:!1,status:n["a"].CLEAR,form:{role:"",name:"",email:"",password:""}}},computed:{user:function(){return this.$store.getters["user/user"]},isLoggedIn:function(){return this.$store.getters["user/isLoggedIn"]},allowEdit:function(){return this.isUser||this.isAdmin},isAnon:function(){return this.user.role===n["a"].ANON},isUser:function(){return this.user.role===n["a"].USER},isAdmin:function(){return this.user.role===n["a"].ADMIN},isValid:function(){return!!this.isLoggedIn&&(this.status===n["a"].CLEAR&&(this.isValidName||this.isValidEmail||this.isValidPassword))},isValidName:function(){return this.form.name.length>4&&this.form.name!==this.user.name},isValidEmail:function(){return!(this.form.email.indexOf("@")<0)&&(!(this.form.email.indexOf(".")<0)&&(this.form.email.length>4&&this.form.email!==this.user.email))},isValidPassword:function(){return this.form.password.length>7&&this.form.password!==this.user.password}},mounted:function(){this.resetForm()},methods:{toggleEdit:function(){this.isEdit=!this.isEdit,this.resetForm()},resetForm:function(){this.user&&(this.form.name=this.user.name,this.form.email=this.user.email,this.form.role=this.user.role)},resetStatus:function(){this.status=n["a"].CLEAR},submitUserUpgrade:function(){var t=this;if(this.status===n["a"].CLEAR&&this.isValid){this.status=n["a"].WAITING;var s={id:this.user.id};return this.isValidName&&(s.name=this.form.name),this.isValidEmail&&(s.email=this.form.email),this.isValidPassword&&(s.password=this.form.password),this.$store.dispatch("user/update",s).then((function(s){return t.handleSuccess(s)})).catch((function(s){return t.handleError(s)}))}},handleSuccess:function(t){var s=this;t.isTimed=!0,t.isError=!1,this.status=n["a"].SUCCESS,this.$store.commit("toasts/toastAdd",t),a["a"].timeDelay((function(){s.status=n["a"].CLEAR,s.toggleEdit()}),o["a"].DELAY_SUCCESS)},handleError:function(t){this.status=n["a"].ERROR,this.$emit(n["a"].ERROR,t),this.$store.commit("toasts/toastAdd",t)}}},S=b,A=Object(c["a"])(S,i,r,!1,null,null,null);s["default"]=A.exports},c975:function(t,s,e){"use strict";var i=e("23e7"),r=e("4d64").indexOf,a=e("a640"),o=e("ae40"),n=[].indexOf,l=!!n&&1/[1].indexOf(1,-0)<0,u=a("indexOf"),c=o("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:l||!u||!c},{indexOf:function(t){return l?n.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=User.18598c56.js.map