(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["UserCreate"],{"924e":function(t,e,s){"use strict";s.r(e);var r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"user relative"},[s("router-link",{staticClass:"user__home",attrs:{to:"/",title:"go to home"}},[s("p",{staticClass:"upper text-bold"},[t._v("Home")])]),s("br"),s("Card",{staticClass:"user__card max-30"},[s("div",{attrs:{slot:"default"},slot:"default"},[s("StatusBar",{class:t.status}),s("div",{staticClass:"text-center "},[s("p",{staticClass:"upper text-bold display-inline-b"},[t._v(" Create ")])]),s("form",{staticClass:"user__form",on:{submit:function(e){return e.preventDefault(),t.submitForm(e)}}},[s("div",{staticClass:"input-control"},[s("label",[s("p",[t._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],attrs:{required:"",type:"string",minlength:"4"},domProps:{value:t.form.name},on:{input:[function(e){e.target.composing||t.$set(t.form,"name",e.target.value)},t.resetStatus]}})])]),s("div",{staticClass:"input-control"},[s("label",[s("p",[t._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.email,expression:"form.email"}],attrs:{required:"",type:"email"},domProps:{value:t.form.email},on:{input:[function(e){e.target.composing||t.$set(t.form,"email",e.target.value)},t.resetStatus]}})])]),s("div",{staticClass:"input-control"},[s("label",[s("p",[t._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],attrs:{required:"",type:"password",minlength:"7"},domProps:{value:t.form.password},on:{input:[function(e){e.target.composing||t.$set(t.form,"password",e.target.value)},t.resetStatus]}})])])])],1),s("template",{staticClass:"user__form__footer",slot:"footer"},[s("router-link",{staticClass:"text-bold color-fore",attrs:{to:"/user/login"}},[t._v(" Login ")]),s("button",{staticClass:"user__form__footer__ok-btn",class:{DISABLED:!t.isValid},attrs:{tabindex:t.isValid?0:-1,type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm(e)}}},[s("p",[t._v("OK")])])],1)],2)],1)},a=[],i=(s("c975"),s("b0c0"),s("8adc")),o=s("fbc4"),n=s("6ffa"),u=s("28ea"),l=s("c958"),m=s("5dff"),c="anon",d={name:"UserCreate",components:{Card:l["a"],StatusBar:u["a"]},data:function(){return{status:n["a"].CLEAR,form:{name:"",email:"",password:""}}},computed:{isValid:function(){return!(this.form.name.length<4)&&(!(this.form.email.length<4)&&(!(this.form.email.indexOf("@")<0)&&(!(this.form.email.indexOf(".")<0)&&(this.status===n["a"].CLEAR&&this.form.password.length>=7))))},user:function(){return this.$store.getters["user/user"]}},methods:{resetStatus:function(){this.status=n["a"].CLEAR},submitForm:function(){if(this.isValid&&this.status===n["a"].CLEAR)return this.status=n["a"].WAITING,this.user&&this.user.email===c?this.submitUserUpgrade():this.submitUser()},submitUser:function(){var t=this;return this.$store.dispatch("user/create",this.form).then((function(e){return t.handleSuccess(e)})).catch((function(e){return t.handleError(e)}))},submitUserUpgrade:function(){var t=this,e={id:this.user.id,name:this.form.name,email:this.form.email,password:this.form.password};return this.$store.dispatch("user/createUpgrade",e).then((function(e){return t.handleSuccess(e)})).catch((function(e){return t.handleError(e)}))},handleSuccess:function(t){var e=this;t.isTimed=!0,t.isError=!1,this.status=n["a"].SUCCESS,this.$store.commit("toasts/toastAdd",t),i["a"].timeDelay((function(){e.status=n["a"].CLEAR,e.$router.push({name:m["a"].HOME})}),o["a"].DELAY_SUCCESS)},handleError:function(t){this.status=n["a"].ERROR,this.$emit(n["a"].ERROR,t),this.$store.commit("toasts/toastAdd",t)}}},f=d,p=s("2877"),h=Object(p["a"])(f,r,a,!1,null,null,null);e["default"]=h.exports},c975:function(t,e,s){"use strict";var r=s("23e7"),a=s("4d64").indexOf,i=s("a640"),o=s("ae40"),n=[].indexOf,u=!!n&&1/[1].indexOf(1,-0)<0,l=i("indexOf"),m=o("indexOf",{ACCESSORS:!0,1:0});r({target:"Array",proto:!0,forced:u||!l||!m},{indexOf:function(t){return u?n.apply(this,arguments)||0:a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=UserCreate.18b8d8b2.js.map