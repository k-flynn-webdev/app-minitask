(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{1511:function(t,s,i){"use strict";i.r(s);var e=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("section",{staticClass:"container user"},[i("div",{staticClass:"columns is-centered"},[i("div",{staticClass:"column is-8 has-text-left"},[i("div",{staticClass:"box"},[i("p",{staticClass:"is-size-4 has-text-centered has-text-weight-bold"},[t._v(" User ")]),i("form",{on:{submit:function(s){return s.preventDefault(),t.submitUser(s)}}},[i("b-field",{attrs:{label:"Email"}},[i("b-input",{attrs:{type:"email",minLength:"5",disabled:!t.isEdit},on:{input:t.updateEmail},model:{value:t.input.email,callback:function(s){t.$set(t.input,"email",s)},expression:"input.email"}})],1),i("b-field",{attrs:{label:"Password"}},[i("b-input",{attrs:{type:"password",minlength:"8",placeholder:"********",disabled:!t.isEdit},on:{input:t.updatePassword},model:{value:t.input.password,callback:function(s){t.$set(t.input,"password",s)},expression:"input.password"}})],1),i("div",{staticClass:"columns is-mobile"},[t._m(0),i("div",{staticClass:"column"},[i("p",[t._v(t._s(t.user.role))]),i("p",[t._v(t._s(t._f("itemDate")(t.user)))]),i("p",[t._v(t._s(t._f("itemUpdate")(t.user)))]),i("p",[t._v(t._s(t._f("itemLogin")(t.user)))])])]),i("br"),i("div",{staticClass:"columns is-gapless is-mobile is-vbottom"},[i("div",{staticClass:"column"},[i("b-button",{attrs:{"native-type":"submit",type:"is-primary",disabled:!t.allowedEdit},on:{click:t.onEdit}},[t._v(" Edit ")])],1),i("div",{staticClass:"column is-narrow"},[i("b-button",{attrs:{"native-type":"submit",type:"is-primary",disabled:!t.hasChanges,loading:t.isLoading},on:{click:t.submitUser}},[t._v(" Update ")])],1)])],1)]),t.showResendVerify?i("div",[i("b-button",{staticClass:"resend-link",on:{click:t.submitResendLink}},[t._v(" Resend verify email ")])],1):t._e()])])])},n=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"column is-narrow"},[i("p",[t._v("Role:")]),i("p",[t._v("Created:")]),i("p",[t._v("Updated:")]),i("p",[t._v("Login:")])])}],a=(i("d3b7"),i("5530")),o=i("c0dc"),r=i("5a50"),l=i("ec41"),u=i("2f62"),d={name:"User",data:function(){return{isEdit:!1,isLoading:!1,input:{email:"",password:""}}},computed:Object(a["a"])({showResendVerify:function(){return!(!this.user.verify||"anon"===this.user.role)},allowedEdit:function(){return!(this.user.verify||"anon"===this.user.role)},emailAllowed:function(){return this.input.email.length>1&&this.input.email!==this.user.email},passwordAllowed:function(){return this.input.password.length>8},hasChanges:function(){return this.emailAllowed||this.passwordAllowed}},Object(u["b"])(r["l"].store,{user:function(t){return t.user}})),created:function(){return this.getUser()},methods:{onEdit:function(){this.isEdit=!this.isEdit,this.input.email=this.user.email,this.input.password=""},updateEmail:function(t){this.input.email=t},updatePassword:function(t){this.input.password=t},submitResendLink:function(){return o["a"].get(r["m"].API.GET+"?email="+this.user.email)},submitUser:function(){var t=this;if(this.isEdit&&this.allowedEdit&&this.hasChanges&&!this.isLoading){var s={};this.emailAllowed&&(s["email"]=this.input.email),this.passwordAllowed&&(s["password"]=this.input.password),this.isLoading=!0,this.$store.dispatch("".concat(r["l"].store,"/patch"),s).then((function(s){t.onEdit(),t.isEdit=!1,t.$buefy.toast.open({duration:1500,message:Object(l["a"])(s,"data.message","success"),position:"is-top",type:"is-success"})})).catch((function(s){return t.handleError(s)})).finally((function(){return t.isLoading=!1}))}},getUser:function(){var t=this;return this.$store.dispatch("".concat(r["l"].store,"/get")).then((function(){t.onEdit(),t.isEdit=!1})).catch((function(s){return t.handleError(s)}))},handleError:function(t){throw this.isLoading=!1,this.$buefy.toast.open({duration:5e3,message:Object(l["a"])(t,"response.data.message","error"),position:"is-top",type:"is-danger"}),t}}},c=d,p=i("2877"),h=Object(p["a"])(c,e,n,!1,null,null,null);s["default"]=h.exports}}]);